<div class="swipe-container" #container>
  @if (error()) {
    <div class="error-message">
      {{ error() }}
      <button class="retry-btn" (click)="restart()">Try Again</button>
    </div>
  } @else if (isLoading() && currentPair().length === 0) {
    <div class="loading-state">
      <div class="spinner"></div>
      <p>Loading workers...</p>
    </div>
  } @else if (currentPair().length === 2) {
    <div class="comparison-area">
      <!-- Left Card -->
      <div 
        class="card left-card"
        [class.highlight-left]="swipeDirection() === 'left'"
        [style.transform]="leftCardTransform()"
      >
        <div class="card-content">
          <img [src]="currentPair()[0].photo.url" [alt]="currentPair()[0].fullName" class="card-image">
          <div class="card-info">
            <h3 class="card-name">{{ currentPair()[0].fullName }}</h3>
            <p class="card-description">{{ currentPair()[0].position }}</p>
          </div>
          <div class="selection-overlay">
            <div class="selection-icon">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
              </svg>
            </div>
          </div>
        </div>
      </div>

      <!-- Right Card -->
      <div 
        class="card right-card"
        [class.highlight-right]="swipeDirection() === 'right'"
        [style.transform]="rightCardTransform()"
      >
        <div class="card-content">
          <img [src]="currentPair()[1].photo.url" [alt]="currentPair()[1].fullName" class="card-image">
          <div class="card-info">
            <h3 class="card-name">{{ currentPair()[1].fullName }}</h3>
            <p class="card-description">{{ currentPair()[1].position }}</p>
          </div>
          <div class="selection-overlay">
            <div class="selection-icon">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
              </svg>
            </div>
          </div>
        </div>
      </div>

      <!-- Swipe Instructions -->
      <div class="swipe-instruction">
        <p>Swipe or tap to choose</p>
        <div class="swipe-arrows">
          <svg class="arrow-left" viewBox="0 0 24 24" fill="currentColor">
            <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/>
          </svg>
          <svg class="arrow-right" viewBox="0 0 24 24" fill="currentColor">
            <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/>
          </svg>
        </div>
      </div>
    </div>

    <!-- Manual Selection Buttons -->
    <div class="manual-controls">
      <button 
        class="select-btn"
        (click)="selectLeft()"
        [disabled]="!canSwipe()"
      >
        Choose Left
      </button>
      
      <button 
        class="select-btn"
        (click)="selectRight()"
        [disabled]="!canSwipe()"
      >
        Choose Right
      </button>
    </div>

    <!-- Progress Indicator -->
    <div class="progress-indicator">
      <div class="progress-text">
        Comparisons: {{ comparisonCount() }}
      </div>
      <div class="progress-bar">
        <div 
          class="progress-fill"
          [style.width.%]="comparisonCount() > 0 ? Math.min(100, (comparisonCount() * 10)) : 0"
        ></div>
      </div>
    </div>
  }
</div>