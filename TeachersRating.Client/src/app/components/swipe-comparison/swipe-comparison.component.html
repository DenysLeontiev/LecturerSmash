<div class="swipe-container" #container>
  @if (currentPair().length === 2) {
    <div class="comparison-area">
      <!-- Left Card -->
      <div 
        class="card left-card"
        [class.highlight-left]="swipeDirection() === 'left'"
        [style.transform]="leftCardTransform()"
      >
        <div class="card-content">
          <img [src]="currentPair()[0].imageUrl" [alt]="currentPair()[0].name" class="card-image">
          <div class="card-info">
            <h3 class="card-name">{{ currentPair()[0].name }}</h3>
            @if (currentPair()[0].description) {
              <p class="card-description">{{ currentPair()[0].description }}</p>
            }
          </div>
          <div class="selection-overlay">
            <div class="selection-icon">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
              </svg>
            </div>
          </div>
        </div>
      </div>

      <!-- Right Card -->
      <div 
        class="card right-card"
        [class.highlight-right]="swipeDirection() === 'right'"
        [style.transform]="rightCardTransform()"
      >
        <div class="card-content">
          <img [src]="currentPair()[1].imageUrl" [alt]="currentPair()[1].name" class="card-image">
          <div class="card-info">
            <h3 class="card-name">{{ currentPair()[1].name }}</h3>
            @if (currentPair()[1].description) {
              <p class="card-description">{{ currentPair()[1].description }}</p>
            }
          </div>
          <div class="selection-overlay">
            <div class="selection-icon">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
              </svg>
            </div>
          </div>
        </div>
      </div>

      <!-- Swipe Instructions -->
      <div class="swipe-instruction">
        <p>Swipe or tap to choose</p>
        <div class="swipe-arrows">
          <svg class="arrow-left" viewBox="0 0 24 24" fill="currentColor">
            <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/>
          </svg>
          <svg class="arrow-right" viewBox="0 0 24 24" fill="currentColor">
            <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/>
          </svg>
        </div>
      </div>
    </div>

    <!-- Manual Selection Buttons (for accessibility) -->
    <div class="manual-controls">
      <button 
        class="select-btn"
        (click)="selectLeft()"
        [disabled]="!canSwipe()"
        [attr.aria-label]="'Select ' + currentPair()[0].name"
      >
        Choose {{ currentPair()[0].name }}
      </button>
      
      <button 
        class="select-btn"
        (click)="selectRight()"
        [disabled]="!canSwipe()"
        [attr.aria-label]="'Select ' + currentPair()[1].name"
      >
        Choose {{ currentPair()[1].name }}
      </button>
    </div>

    <!-- Progress Indicator -->
    <div class="progress-indicator">
      <div class="progress-text">
        {{ Math.floor(currentIndex() / 2) + 1 }} / {{ Math.floor(demoItems.length / 2) }}
      </div>
      <div class="progress-bar">
        <div 
          class="progress-fill"
          [style.width.%]="((currentIndex() / 2) / (demoItems.length / 2)) * 100"
        ></div>
      </div>
    </div>
  } @else {
    <!-- Completion State -->
    <div class="completion-state">
      <div class="completion-content">
        <h2>All Done! ðŸŽ‰</h2>
        <p>You've completed all comparisons.</p>
        <button class="restart-btn" (click)="restart()">
          Start Over
        </button>
      </div>
    </div>
  }
</div>