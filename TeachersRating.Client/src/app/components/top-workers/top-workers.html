<div class="container">
  <div class="manual-controls" style="margin-bottom: 1.5rem; max-width: 400px;">
    <button class="select-btn" routerLink="/home" style="display: flex; align-items: center; gap: 0.5rem;">
      <fa-icon icon="backward-step"></fa-icon>
      Повернутися на головну
    </button>
  </div>
  <div class="header-section">
    <h1>Топ працівників</h1>
    
    <div class="selection-controls">
      <div class="form-group">
        <label for="institute-select">Інститут:</label>
        <select 
          id="institute-select"
          [value]="selectedInstitute()?.id || ''"
          (change)="onInstituteChange($event)"
          [disabled]="institutesLoading()"
          class="form-select">
          <option value="">Оберіть інститут...</option>
          @for (institute of institutes(); track institute.id) {
            <option [value]="institute.id">{{ institute.name | instituteRename }}</option>
          }
        </select>
      </div>

      <div class="form-group">
        <label for="department-select">Кафедра:</label>
        <select 
          id="department-select"
          [value]="selectedDepartment()?.id || ''"
          (change)="onDepartmentChange($event)"
          [disabled]="departmentsLoading() || !selectedInstitute()"
          class="form-select">
          <option value="">Оберіть кафедру...</option>
          @for (department of departments(); track department.id) {
            <option [value]="department.id">{{ department.longName }}</option>
          }
        </select>
      </div>
    </div>

    @if (institutesLoading() || departmentsLoading()) {
      <div class="loading">Завантаження...</div>
    }
  </div>

  @if (selectedDepartment()) {
    <div class="section">
      <h2>Найкращі викладачі</h2>
      @if (workersLoading()) {
        <div class="loading">Завантаження викладачів...</div>
      }
      <div class="workers-grid">
        @for (worker of workers(); track worker.id; let i = $index) {
          <div class="worker-card">
            <div class="rank">{{ i + 1 }}</div>
            <img 
              src="{{worker.photo.url}}" 
              [alt]="worker.photo.url"
              class="photo">
            <h3>{{ worker.fullName }}</h3>
            <p class="position">{{ worker.position }}</p>
            <div class="stats">
              <span><fa-icon icon="thumbs-up" class="like-icon"></fa-icon> {{ worker.numberOfLikes }}</span>
              <span><fa-icon icon="thumbs-down" class="dislike-icon"></fa-icon> {{ worker.numberOfDislikes }}</span>
            </div>
          </div>
        }
        @if (workers().length === 0 && !workersLoading()) {
          <div class="no-data">Працівників не знайдено</div>
        }
      </div>
    </div>
  }
</div>
